{"version":3,"sources":["webpack:///./src/components/home/mng/TaskMng.vue?2709","webpack:///./src/components/home/mng/TaskMng.vue","webpack:///./src/components/home/mng/TaskMng.vue?08e6","webpack:///./src/components/home/mng/TaskMng.vue?8831"],"names":["class","style","loginfoStatus","taskData","datas","length","item","index","taskLevel","taskTitle","finishTime","taskContent","taskStatus","abolish","id","executorName","type","placeholder","pushData","selectLevel","selectAdmin","pushTask","errorMsg","adminsStatus","adminData","assign","adminName","adminFace","name","setup","selectStatus","executorId","publisherId","Number","JSON","parse","sessionStorage","getItem","adminId","Array","initDataTask","a","get","apis","apiUrl","task","then","res","console","log","i","data","push","initDataAdmin","admin","value","levelNum","post","router","go","catch","err","taskId","put","render","__scopeId"],"mappings":"2IAAA,W,oJCESA,MAAM,qB,GAIHA,MAAM,a,SAAoCC,MAAA,2C,GAC1CD,MAAM,e,GACLA,MAAM,a,SAELA,MAAM,e,SACNA,MAAM,e,GACNA,MAAM,kB,SAIZA,MAAM,W,GACLA,MAAM,uB,EACT,eAA0D,MAAtDC,MAAA,8CAA6C,QAAI,G,GAChDD,MAAM,mB,GAGJA,MAAM,qB,GAKNA,MAAM,Q,GASLA,MAAM,e,GACNA,MAAM,c,0EApClB,eAyCM,OAzCDA,MAAK,CAAC,eAAc,4BAAqC,EAAAE,cAAc,0BAA0B,EAAAA,iB,CACxC,GAAvB,EAAAC,SAASC,MAAMC,Q,iBAApD,eAaM,MAbN,EAaM,E,mBAZJ,eAWM,2BAXgD,EAAAF,SAASC,MAAK,CAA7BE,EAAKC,K,iBAA5C,eAWM,OAXDP,MAAK,CAAC,oBAAmB,YACW,GAAhBM,EAAKE,UAAa,cAA8B,GAAhBF,EAAKE,UAAa,aAA6B,GAAhBF,EAAKE,a,CAE3F,eAAoJ,KAApJ,EAAoJ,C,8BAA5HF,EAAKG,WAAS,GAAyDH,EAAe,Y,iBAAtE,eAAuG,OAAvG,EAAwE,QAAK,eAAEA,EAAKI,YAAU,I,wBACtI,eAAiD,KAAjD,EAAiD,eAAvBJ,EAAKK,aAAW,GAC1C,eAKM,MALN,EAKM,CAJ4C,GAAjBL,EAAKM,YAAgC,GAAjBN,EAAKM,Y,iBAAxD,eAAwG,M,MAApGZ,MAAM,eAA8D,QAAK,GAAE,EAAAa,QAAQP,EAAKQ,KAAK,KAAE,gB,sBACpD,GAAjBR,EAAKM,Y,iBAAnC,eAA0D,KAA1D,EAAkD,Q,sBACH,GAAjBN,EAAKM,Y,iBAAnC,eAA0D,KAA1D,EAAkD,Q,sBAClD,eAAyD,KAAzD,EAA2B,OAAI,eAAEN,EAAKS,cAAY,M,gCAIxD,eAA4C,KAA5C,EAA4B,gBAC5B,eAwBM,MAxBN,EAwBM,CAvBJ,EACA,eAcM,MAdN,EAcM,C,eAbJ,eAA0F,SAAnFf,MAAM,kBAAkBgB,KAAK,OAAOC,YAAY,M,qCAAe,EAAAC,SAAST,UAAS,I,mBAAlB,EAAAS,SAAST,a,eAC/E,eAAkG,YAAxFT,MAAM,qBAAqBiB,YAAY,O,qCAAgB,EAAAC,SAASP,YAAW,I,mBAApB,EAAAO,SAASP,eAC1E,eAIM,MAJN,EAIM,CAHJ,eAA0G,MAAtGX,MAAK,CAAC,YAAW,oBAAyE,GAApB,EAAAkB,SAASV,YAA5D,QAAK,eAAE,EAAAW,YAAY,KAAwD,MAAG,GACrG,eAAgH,MAA5GnB,MAAK,CAAC,eAAc,uBAA4E,GAApB,EAAAkB,SAASV,YAA/D,QAAK,eAAE,EAAAW,YAAY,KAA2D,MAAG,GAC3G,eAA8G,MAA1GnB,MAAK,CAAC,cAAa,sBAA2E,GAApB,EAAAkB,SAASV,YAA9D,QAAK,eAAE,EAAAW,YAAY,KAA0D,MAAG,KAE3G,eAKM,MALN,EAKM,CAJqD,EAAY,c,iBAArE,eAAkF,O,MAA7EnB,MAAM,mBAAoB,QAAK,oBAAE,EAAAoB,eAAA,KAAiC,W,iBACvE,eAA6F,O,MAAxFpB,MAAM,mBAAoB,QAAK,oBAAE,EAAAoB,eAAA,KAAoB,OAAI,eAAE,EAAAF,SAASH,cAAY,IACrF,eAAuD,OAAlDf,MAAM,gBAAiB,QAAK,oBAAE,EAAAqB,YAAA,KAAU,QAC7C,eAAqJ,MAAjJrB,MAAK,CAAC,YAAW,6BAAsC,EAAAkB,SAASI,SAAS,yBAAyB,EAAAJ,SAASI,Y,eAAc,EAAAJ,SAASI,UAAQ,OAGlJ,eAMM,OANDtB,MAAK,CAAC,iBAAgB,6BAAsC,EAAAuB,aAAa,yBAAyB,EAAAA,gB,qBACrG,eAGM,2BAH6C,EAAAC,UAAUpB,MAAK,CAA9BE,EAAKC,K,iBAAzC,eAGM,OAHDP,MAAM,iBAA0D,QAAK,GAAE,EAAAyB,OAAOnB,EAAKQ,GAAGR,EAAKoB,Y,CAC9F,eAA+C,KAA/C,EAA+C,eAArBpB,EAAKqB,WAAS,GACxC,eAA8C,KAA9C,EAA8C,eAArBrB,EAAKoB,WAAS,I,yHC7BlC,iBAAgB,CAC7BE,KAAM,UACNC,MAAA,WAEgB,iBAAd,IACMN,EAAe,gBAAI,GACnBO,EAAe,gBAAI,GACnBZ,EAAW,eAAS,CACxBa,WAAW,GACXC,YAAYC,OAAOC,KAAKC,MAAMC,eAAeC,QAAQ,YAAsBC,SAC3E7B,UAAU,GACVE,YAAY,GACZH,UAAU,EACVO,aAAa,GACbO,SAAS,KAELE,EAAY,eAAS,CACzBpB,MAAMmC,UAEFpC,EAAW,eAAS,CACxBC,MAAMmC,UAIR,SAASC,IACP,EAAAC,EAAMC,IAAIC,EAAA,KAAKC,OAAOC,KAAK,OAAOZ,OAAOC,KAAKC,MAAMC,eAAeC,QAAQ,YAAsBC,UAAUQ,MAAK,SAAAC,GAC9GC,QAAQC,IAAIF,GACZ,IAAI,IAAIG,EAAI,EAAEA,EAAEH,EAAII,KAAKA,KAAK9C,OAAO6C,IACnC/C,EAASC,MAAMgD,KAAKL,EAAII,KAAKA,KAAKD,OAKxC,SAASG,IACP,EAAAZ,EAAMC,IAAIC,EAAA,KAAKC,OAAOU,OAAOR,MAAK,SAAAC,GAChC,IAAI,IAAIG,EAAI,EAAEA,EAAEH,EAAII,KAAKA,KAAK9C,OAAO6C,IACnC1B,EAAUpB,MAAMgD,KAAKL,EAAII,KAAKA,KAAKD,OAKzC,SAAS9B,IACPG,EAAagC,OAAShC,EAAagC,MAGrC,SAAS9B,EAAOM,EAAkBL,GAChCI,EAAayB,OAAQ,EACrBrC,EAASa,WAAaA,EACtBb,EAASH,aAAeW,EACxBsB,QAAQC,IAAIvB,GACZN,IAGF,SAASD,EAAYqC,GACnBtC,EAASV,UAAYgD,EAGvB,SAASnC,IACP,EAAAoB,EAAMgB,KAAKd,EAAA,KAAKC,OAAOC,KAAK,CAC1Bd,WAAWb,EAASa,WACpBC,YAAYd,EAASc,YACrBvB,UAAUS,EAAST,UACnBE,YAAYO,EAASP,YACrBH,UAAUU,EAASV,YAClBsC,MAAK,SAAAC,GACNC,QAAQC,IAAIF,GACZW,EAAA,KAAOC,GAAG,MACTC,OAAM,SAAAC,GACJA,EAAIV,KAAKpB,WACVb,EAASI,SAAWuC,EAAIV,KAAKpB,WACtB8B,EAAIV,KAAK1C,UAChBS,EAASI,SAAWuC,EAAIV,KAAK1C,UACtBoD,EAAIV,KAAKxC,YAChBO,EAASI,SAAWuC,EAAIV,KAAKxC,YACtBkD,EAAIV,KAAK3C,UAChBU,EAASI,SAAWuC,EAAIV,KAAK3C,UAE7BU,EAASI,SAAWuC,EAAIV,KAAKnB,eAOnC,SAASnB,EAAQiD,GACf,EAAArB,EAAMsB,IAAIpB,EAAA,KAAKC,OAAOC,KAAK,WAAWiB,GAAQhB,MAAK,SAAAC,GACjDC,QAAQC,IAAIF,GACZW,EAAA,KAAOC,GAAG,MAKd,OAtEAN,IACAb,IAqEA,gBACEtB,SAAQ,EACRf,SAAQ,EACRqB,UAAS,EACTD,aAAY,EACZH,YAAW,EACXU,aAAY,EACZX,YAAW,EACXM,OAAM,EACNJ,SAAQ,EACRR,QAAO,GACJ,qB,UC1GT,EAAOmD,OAAS,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-48cfaab0.48c3de60.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TaskMng.vue?vue&type=style&index=0&id=01f7ea78&lang=scss&scoped=true\"","<template>\r\n  <div class=\"task-mng-box\" :class=\"{'loginfo-transition-begin':loginfoStatus,'loginfo-transition-end':!loginfoStatus}\">\r\n    <div class=\"release-task-list\" v-if=\"taskData.datas.length!=0\">\r\n      <div class=\"release-task-item\" v-for=\"(item,index) in taskData.datas\"\r\n           :class=\"{'low-task':item.taskLevel==0,'middle-task':item.taskLevel==1,'hight-task':item.taskLevel==2}\r\n      \">\r\n        <h1 class=\"task-name\">{{item.taskTitle}}<span style=\"font-size: 15px;margin-left: 10px;\" v-if=\"item.finishTime\">ÂÆåÊàêÊó∂Èó¥:{{item.finishTime}}</span></h1>\r\n        <h2 class=\"task-remark\">{{item.taskContent}}</h2>\r\n        <div class=\"task-info\">\r\n          <h2 class=\"task-abolish\" v-if=\"item.taskStatus!=2&&item.taskStatus!=1\" @click=\"abolish(item.id)\">Â∫üÈô§</h2>\r\n          <h2 class=\"task-status\" v-if=\"item.taskStatus==1\">Â∑≤ÂÆåÊàê</h2>\r\n          <h2 class=\"task-status\" v-if=\"item.taskStatus==0\">Êú™ÂÆåÊàê</h2>\r\n          <h2 class=\"task-performer\">ÊâßË°å‰∫∫:{{item.executorName}}</h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <h1 class=\"no-task\"  v-else>üò±‰Ω†ËøòÊ≤°ÊúâÂèëÂ∏É‰ªªÂä°Âë¢</h1>\r\n    <div class=\"release-task-center\">\r\n      <h1 style=\"text-align: left;margin-bottom: 20px\">ÂèëÂ∏É‰ªªÂä°</h1>\r\n      <div class=\"task-write-info\">\r\n        <input class=\"write-task-name\" type=\"text\" placeholder=\"‰ªªÂä°Âêç\" v-model=\"pushData.taskTitle\">\r\n        <textarea class=\"write-task-content\" placeholder=\"‰ªªÂä°ÊèèËø∞\" v-model=\"pushData.taskContent\"></textarea>\r\n        <div class=\"task-select-level\">\r\n          <h1 class=\"level-low\" @click=\"selectLevel(0)\" :class=\"{'level-low-select':pushData.taskLevel==0}\">‰Ωé‰ºòÂÖà</h1>\r\n          <h1 class=\"level-middle\" @click=\"selectLevel(1)\" :class=\"{'level-middle-select':pushData.taskLevel==1}\">‰∏≠‰ºòÂÖà</h1>\r\n          <h1 class=\"level-hight\" @click=\"selectLevel(2)\" :class=\"{'level-hight-select':pushData.taskLevel==2}\">È´ò‰ºòÂÖà</h1>\r\n        </div>\r\n        <div class=\"push\">\r\n          <div class=\"select-performer\" @click=\"selectAdmin\" v-if=\"selectStatus\">ÈÄâÊã©ÊâßË°å‰∫∫</div>\r\n          <div class=\"select-performer\" @click=\"selectAdmin\" v-else>ÊâßË°å‰∫∫:{{pushData.executorName}}</div>\r\n          <div class=\"push-task-btn\" @click=\"pushTask\">ÂèëÂ∏É‰ªªÂä°</div>\r\n          <h1 class=\"error-msg\" :class=\"{'loginfo-transition-begin':!pushData.errorMsg,'loginfo-transition-end':pushData.errorMsg}\" >{{pushData.errorMsg}}</h1>\r\n        </div>\r\n      </div>\r\n      <div class=\"performer-list\" :class=\"{'loginfo-transition-begin':!adminsStatus,'loginfo-transition-end':adminsStatus}\">\r\n        <div class=\"performer-item\" v-for=\"(item,index) in adminData.datas\" @click=\"assign(item.id,item.adminName)\">\r\n          <h1 class=\"admin-emoji\">{{item.adminFace}}</h1>\r\n          <h1 class=\"admin-name\">{{item.adminName}}</h1>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent, reactive,ref,toRefs,toRef} from 'vue'\r\nimport {useStore} from \"vuex\";\r\nimport {AdminModel, TaskModel} from \"@/model/datas\";\r\nimport axios from \"axios\";\r\nimport apis from \"@/common/apis\";\r\nimport router from \"@/router\";\r\nimport {cmsMngInit} from \"@/script/transitionInit\";\r\nexport default defineComponent({\r\n  name: \"TaskMng\",\r\n  setup(){\r\n\r\n    const store = useStore()\r\n    const adminsStatus = ref(false)\r\n    const selectStatus = ref(true)\r\n    const pushData = reactive({\r\n      executorId:'',\r\n      publisherId:Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId),\r\n      taskTitle:'',\r\n      taskContent:'',\r\n      taskLevel:0,\r\n      executorName:'',\r\n      errorMsg:''\r\n    })\r\n    const adminData = reactive({\r\n      datas:Array<AdminModel>()\r\n    })\r\n    const taskData = reactive({\r\n      datas:Array<TaskModel>()\r\n    })\r\n    initDataAdmin()\r\n    initDataTask()\r\n    function initDataTask(){\r\n      axios.get(apis.apiUrl.task+'rel/'+Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId)).then(res=>{\r\n        console.log(res)\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          taskData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function initDataAdmin(){\r\n      axios.get(apis.apiUrl.admin).then(res=>{\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          adminData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function selectAdmin(){\r\n      adminsStatus.value = !adminsStatus.value\r\n    }\r\n\r\n    function assign(executorId:string,adminName:string){\r\n      selectStatus.value = false\r\n      pushData.executorId = executorId\r\n      pushData.executorName = adminName\r\n      console.log(adminName)\r\n      selectAdmin()\r\n    }\r\n\r\n    function selectLevel(levelNum:number){\r\n      pushData.taskLevel = levelNum\r\n    }\r\n\r\n    function pushTask(){\r\n      axios.post(apis.apiUrl.task,{\r\n        executorId:pushData.executorId,\r\n        publisherId:pushData.publisherId,\r\n        taskTitle:pushData.taskTitle,\r\n        taskContent:pushData.taskContent,\r\n        taskLevel:pushData.taskLevel\r\n      }).then(res=>{\r\n        console.log(res)\r\n        router.go(0)\r\n      }).catch(err=>{\r\n        if(err.data.executorId){\r\n          pushData.errorMsg = err.data.executorId\r\n        }else if(err.data.taskTitle){\r\n          pushData.errorMsg = err.data.taskTitle\r\n        }else if(err.data.taskContent){\r\n          pushData.errorMsg = err.data.taskContent\r\n        }else if(err.data.taskLevel){\r\n          pushData.errorMsg = err.data.taskLevel\r\n        }else{\r\n          pushData.errorMsg = err.data.publisherId\r\n        }\r\n\r\n\r\n      })\r\n    }\r\n\r\n    function abolish(taskId:number){\r\n      axios.put(apis.apiUrl.task+'abolish/'+taskId).then(res=>{\r\n        console.log(res)\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n\r\n    return{\r\n      pushData,\r\n      taskData,\r\n      adminData,\r\n      adminsStatus,\r\n      selectAdmin,\r\n      selectStatus,\r\n      selectLevel,\r\n      assign,\r\n      pushTask,\r\n      abolish,\r\n      ...cmsMngInit()\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../../assets/style/mixin\";\r\n.task-mng-box{\r\n\r\n  margin-top: 30px;\r\n  .release-task-list{\r\n    border-radius: 15px;\r\n    width: 780px;\r\n    display: flex;\r\n    overflow-x: auto;\r\n    white-space: nowrap;\r\n    //padding: 5px;\r\n    .release-task-item{\r\n      margin-right: 30px;\r\n      box-sizing: border-box;\r\n\r\n      background-color: #42b983;\r\n      padding: 10px;\r\n      border-radius: 15px;\r\n      text-align: left;\r\n      //height: 130px;\r\n      //width: 350px;\r\n\r\n      .task-name{\r\n\r\n        color: white;\r\n        margin-bottom: 10px;\r\n      }\r\n      .task-remark{\r\n\r\n        word-break: break-all;\r\n        white-space: normal;\r\n        //width: 300px;\r\n        background-color: white;\r\n        color: #76D7C4;\r\n        padding: 5px;\r\n        border-radius: 5px;\r\n        margin-bottom: 10px;\r\n      }\r\n      .task-info{\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        h2{\r\n\r\n          flex: 1;\r\n          padding: 10px;\r\n        }\r\n        .task-abolish{\r\n\r\n          text-align: center;\r\n          color: white;\r\n          background-color: #F39C12;\r\n          border-radius: 5px;\r\n        }\r\n        .task-status{\r\n          background-color: #27AE60;\r\n          border-radius: 5px;\r\n          color: white;\r\n          text-align: center;\r\n        }\r\n        .task-status:nth-child(2){\r\n          //background-color: #F7DC6F!important;\r\n          margin-left: 20px;\r\n          margin-right: 20px;\r\n        }\r\n        .task-performer{\r\n          background-color: #E8F6F3;\r\n          border-radius: 5px;\r\n          color: #76D7C4;\r\n          text-align: center;\r\n          //margin-left: 10px;\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  .no-task{\r\n    background-color: #F7DC6F;\r\n    color: white;\r\n    padding: 10px;\r\n  }\r\n  .release-task-center{\r\n    margin-top: 20px;\r\n    .task-write-info{\r\n      display: flex;\r\n      flex-direction: column;\r\n      .write-task-name{\r\n        width: 200px;\r\n        height: 20px;\r\n        font-size: 20px;\r\n        color: #333333;\r\n        border-left: 5px solid #42b983;\r\n        background-color: #E8F6F3;\r\n        border-bottom: none;\r\n        border-top: none;\r\n        border-right: none;\r\n        outline: none;\r\n        padding: 20px;\r\n        margin-bottom: 20px;\r\n      }\r\n      .write-task-content{\r\n        width: 500px;\r\n        padding: 20px;\r\n        height: 100px;\r\n        resize: none;\r\n        margin-bottom: 20px;\r\n        border-left: 5px solid #42b983;\r\n        border-bottom: none;\r\n        border-top: none;\r\n        border-right: none;\r\n        //border-radius: 10px;\r\n        font-size: 20px;\r\n        background-color: #E8F6F3;\r\n        font-weight: bold;\r\n      }\r\n      .task-select-level{\r\n        display: flex;\r\n        margin-bottom: 30px;\r\n        h1{\r\n          margin-right: 20px;\r\n          padding: 5px 10px;\r\n          cursor: pointer;\r\n          transition: all 0.8s;\r\n        }\r\n        .level-hight{\r\n          border: 2px solid red;\r\n          border-radius: 15px;\r\n          color: red;\r\n        }\r\n        .level-low{\r\n          border: 2px solid #42b983;\r\n          border-radius: 15px;\r\n          color: #42b983;\r\n        }\r\n        .level-middle{\r\n          border: 2px solid #F7DC6F;\r\n          border-radius: 15px;\r\n          color: #F7DC6F;\r\n        }\r\n        .level-hight-select{\r\n          background-color: red;\r\n          color: white;\r\n        }\r\n        .level-low-select{\r\n          background-color: #42b983;\r\n          color: white;\r\n        }\r\n        .level-middle-select{\r\n          background-color:#F7DC6F;\r\n          color: white;\r\n        }\r\n\r\n      }\r\n      .push{\r\n        display: flex;\r\n        align-items: center;\r\n        .write-select{\r\n          width: 100px;\r\n          height: 25px;\r\n\r\n          border-radius: 10px;\r\n\r\n        }\r\n        .select-performer{\r\n          //padding: 10px;\r\n          //width: 100px;\r\n          //height: 25px;\r\n          padding: 10px;\r\n          border-radius: 5px;\r\n          background-color: #2c3e50;\r\n          color: white;\r\n          line-height: 25px;\r\n          cursor: pointer;\r\n        }\r\n        .push-task-btn{\r\n          padding: 10px;\r\n          line-height: 25px;\r\n          border-radius: 5px;\r\n          margin-left: 20px;\r\n          background-color: #42b983;\r\n          color: white;\r\n          font-weight: bold;\r\n          cursor: pointer;\r\n        }\r\n        .error-msg{\r\n          margin-left: 30px;\r\n          color: #E74C3C;\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n    .performer-list{\r\n      margin-top: 20px;\r\n      padding: 20px;\r\n      overflow-x: auto;\r\n      white-space: nowrap;\r\n      display: flex;\r\n      width: 480px;\r\n      .performer-item{\r\n        display: flex;\r\n        @include shadow();\r\n        padding: 10px 20px;\r\n        border-radius: 5px;\r\n        cursor: pointer;\r\n        margin-right: 20px;\r\n        transition: all 0.3s;\r\n        &:hover{\r\n          background-color: #42b983;\r\n          color: white;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport {defineComponent, reactive,ref,toRefs,toRef} from 'vue'\r\nimport {useStore} from \"vuex\";\r\nimport {AdminModel, TaskModel} from \"@/model/datas\";\r\nimport axios from \"axios\";\r\nimport apis from \"@/common/apis\";\r\nimport router from \"@/router\";\r\nimport {cmsMngInit} from \"@/script/transitionInit\";\r\nexport default defineComponent({\r\n  name: \"TaskMng\",\r\n  setup(){\r\n\r\n    const store = useStore()\r\n    const adminsStatus = ref(false)\r\n    const selectStatus = ref(true)\r\n    const pushData = reactive({\r\n      executorId:'',\r\n      publisherId:Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId),\r\n      taskTitle:'',\r\n      taskContent:'',\r\n      taskLevel:0,\r\n      executorName:'',\r\n      errorMsg:''\r\n    })\r\n    const adminData = reactive({\r\n      datas:Array<AdminModel>()\r\n    })\r\n    const taskData = reactive({\r\n      datas:Array<TaskModel>()\r\n    })\r\n    initDataAdmin()\r\n    initDataTask()\r\n    function initDataTask(){\r\n      axios.get(apis.apiUrl.task+'rel/'+Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId)).then(res=>{\r\n        console.log(res)\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          taskData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function initDataAdmin(){\r\n      axios.get(apis.apiUrl.admin).then(res=>{\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          adminData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function selectAdmin(){\r\n      adminsStatus.value = !adminsStatus.value\r\n    }\r\n\r\n    function assign(executorId:string,adminName:string){\r\n      selectStatus.value = false\r\n      pushData.executorId = executorId\r\n      pushData.executorName = adminName\r\n      console.log(adminName)\r\n      selectAdmin()\r\n    }\r\n\r\n    function selectLevel(levelNum:number){\r\n      pushData.taskLevel = levelNum\r\n    }\r\n\r\n    function pushTask(){\r\n      axios.post(apis.apiUrl.task,{\r\n        executorId:pushData.executorId,\r\n        publisherId:pushData.publisherId,\r\n        taskTitle:pushData.taskTitle,\r\n        taskContent:pushData.taskContent,\r\n        taskLevel:pushData.taskLevel\r\n      }).then(res=>{\r\n        console.log(res)\r\n        router.go(0)\r\n      }).catch(err=>{\r\n        if(err.data.executorId){\r\n          pushData.errorMsg = err.data.executorId\r\n        }else if(err.data.taskTitle){\r\n          pushData.errorMsg = err.data.taskTitle\r\n        }else if(err.data.taskContent){\r\n          pushData.errorMsg = err.data.taskContent\r\n        }else if(err.data.taskLevel){\r\n          pushData.errorMsg = err.data.taskLevel\r\n        }else{\r\n          pushData.errorMsg = err.data.publisherId\r\n        }\r\n\r\n\r\n      })\r\n    }\r\n\r\n    function abolish(taskId:number){\r\n      axios.put(apis.apiUrl.task+'abolish/'+taskId).then(res=>{\r\n        console.log(res)\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n\r\n    return{\r\n      pushData,\r\n      taskData,\r\n      adminData,\r\n      adminsStatus,\r\n      selectAdmin,\r\n      selectStatus,\r\n      selectLevel,\r\n      assign,\r\n      pushTask,\r\n      abolish,\r\n      ...cmsMngInit()\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./TaskMng.vue?vue&type=template&id=01f7ea78&scoped=true\"\nimport script from \"./TaskMng.vue?vue&type=script&lang=ts\"\nexport * from \"./TaskMng.vue?vue&type=script&lang=ts\"\n\nimport \"./TaskMng.vue?vue&type=style&index=0&id=01f7ea78&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-01f7ea78\"\n\nexport default script"],"sourceRoot":""}