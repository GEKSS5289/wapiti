{"version":3,"sources":["webpack:///./src/components/home/mng/VideoMng.vue?aa4f","webpack:///./src/components/home/mng/VideoMng.vue","webpack:///./src/components/common/Loading.vue","webpack:///./src/components/common/Loading.vue?48c8","webpack:///./src/components/common/Loading.vue?6f91","webpack:///./src/components/home/mng/VideoMng.vue?1dec","webpack:///./src/components/home/mng/VideoMng.vue?33c0","webpack:///./public/static/add.png","webpack:///./src/components/common/Loading.vue?4c45"],"names":["class","for","src","alt","cmsMngstatus","resData","datas","length","item","index","key","id","controls","resPath","resName","publishAdminName","controlRes","loadingStatus","type","fileSelect","accept","filename","filesize","uploadFile","name","render","__scopeId","components","Loading","setup","Array","formdata","FormData","initData","a","get","apis","apiUrl","res","then","i","data","push","resId","put","router","go","file","target","files","Number","size","toString","match","append","value","post","JSON","parse","sessionStorage","getItem","adminId","headers","console","log","delete","module","exports"],"mappings":"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","file":"js/chunk-c07a10fc.9b2d7b4d.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoMng.vue?vue&type=style&index=0&id=2726c00e&lang=scss&scoped=true\"","<template>\r\n  <div class=\"video-mng-box\" :class=\"{'cmsMng-transition-begin':cmsMngstatus,'cmsMng-transition-end':!cmsMngstatus}\">\r\n    <div class=\"video-list\" v-if=\"resData.datas.length!=0\">\r\n      <div class=\"video-item\" v-for=\"(item,index) in resData.datas\" :key=\"item.id\">\r\n        <video controls :src=\"item.resPath\"/>\r\n        <div class=\"video-info\">\r\n          <h1 class=\"video-name\">视频名:{{item.resName}}</h1>\r\n          <h1 class=\"video-upload-auth\">上传者:{{item.publishAdminName}}</h1>\r\n          <h1 class=\"stop-play-btn\" v-if=\"item.resDel\" @click=\"controlRes(item.id)\">禁止播放</h1>\r\n          <h1 class=\"stop-play-btn\" v-else @click=\"controlRes(item.id)\">恢复播放</h1>\r\n<!--          <h1 class=\"update-btn\">修改</h1>-->\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"video-create\">\r\n      <h1>视频上传</h1>\r\n      <div class=\"uploadmain\" v-if=\"!loadingStatus\">\r\n        <label for=\"file\">\r\n          <img class=\"file-img\" src=\"../../../../public/static/add.png\" alt=\"\">\r\n        </label>\r\n        <input class=\"file-input\" id=\"file\" type=\"file\" @change=\"fileSelect\" accept=\"video/mp4\">\r\n        <h1 class=\"file-info-name\">{{resData.filename}}</h1>\r\n        <h1 class=\"file-info-size\" v-if=\"resData.filesize\">{{resData.filesize}}MB</h1>\r\n        <h1 class=\"file-info-size\" v-else>未上传文件</h1>\r\n        <div class=\"upload-btn\" @click=\"uploadFile\" v-if=\"resData.filename\">上传</div>\r\n      </div>\r\n      <loading v-if=\"loadingStatus\"></loading>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent,reactive,ref} from 'vue'\r\nimport {useStore} from \"vuex\";\r\nimport {ResModel, StoryForm, StoryModel} from \"@/model/datas\";\r\nimport UpdateCard from \"@/components/common/UpdateCard.vue\";\r\nimport axios from \"axios\";\r\nimport apis from \"@/common/apis\";\r\nimport router from \"@/router\";\r\nimport Loading from \"@/components/common/Loading.vue\";\r\nimport {cmsMngInit} from \"@/script/transitionInit\";\r\nexport default defineComponent({\r\n  name: \"VideoMng\",\r\n  components:{\r\n    Loading\r\n  },\r\n  setup(){\r\n\r\n    const resData = reactive({\r\n      datas:Array<ResModel>(),\r\n      filename:'',\r\n      filesize:0.0,\r\n    })\r\n    const formdata = new FormData()\r\n    const store = useStore()\r\n    const loadingStatus = ref(false)\r\n    initData()\r\n    function initData(){\r\n      axios.get(apis.apiUrl.res).then(res=>{\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          resData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function controlRes(resId:number){\r\n      axios.put(apis.apiUrl.res+resId).then(res=>{\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n    function fileSelect(file:any){\r\n      resData.filename = file.target.files[0].name\r\n      resData.filesize = Number((file.target.files[0].size/1024/1024).toString().match(/^\\d+(?:\\.\\d{0,2})?/))\r\n      formdata.append(\"file\",file.target.files[0])\r\n    }\r\n\r\n    function uploadFile(){\r\n      loadingStatus.value = true\r\n      resData.filename = '';\r\n      resData.filesize = 0\r\n      axios.post(apis.apiUrl.res+Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId),formdata,{\r\n        headers:{'Content-Type':'multipart/form-data'}\r\n\r\n      }).then(res=>{\r\n        loadingStatus.value = false\r\n        console.log(\"ok\")\r\n        formdata.delete(\"file\")\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n    return{\r\n      resData,\r\n      controlRes,\r\n      fileSelect,\r\n      uploadFile,\r\n      loadingStatus,\r\n      ...cmsMngInit()\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../../assets/style/mixin\";\r\n.video-mng-box{\r\n  margin-top:50px;\r\n  .video-list{\r\n    height: 200px;\r\n    overflow-y: auto;\r\n    .video-item{\r\n      margin-bottom: 50px;\r\n      //width: 500px;\r\n      //height: 169px;\r\n      @include xFlex();\r\n      //background-color: red;\r\n      align-items: center;\r\n      video{\r\n        //flex: 1;\r\n        width: 300px;\r\n        height: auto;\r\n        margin-right: 50px;\r\n      }\r\n      .video-info{\r\n        //width: 500px;\r\n        flex: 1;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        .video-name{\r\n          width: 160px;\r\n          word-break: break-all;\r\n\r\n          //height: 50px;\r\n          margin-bottom: 20px;\r\n        }\r\n        h1{\r\n          font-size: 15px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-weight: bold;\r\n          transition: all 1s;\r\n          width: 160px;\r\n          height: 50px;\r\n          cursor: pointer;\r\n          margin-right: 20px;\r\n\r\n        }\r\n        .stop-play-btn{\r\n          @include btnhover(#1ABC9C)\r\n        }\r\n        .update-btn{\r\n          @include btnhover(#1ABC9C)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .video-create{\r\n    margin-top: 120px;\r\n    margin-bottom: 130px;\r\n   .uploadmain{\r\n\r\n     display: flex;\r\n     flex-direction: column;\r\n     align-items: center;\r\n     justify-content: center;\r\n   }\r\n\r\n    .file-img{\r\n      cursor:pointer;\r\n      margin-top:30px;\r\n      width: 100px;\r\n      height: 100px\r\n    }\r\n    .file-input{\r\n\r\n      display: none;\r\n    }\r\n    .upload-btn{\r\n      border-radius: 10px;\r\n      border: 1px solid #1ABC9C;\r\n      width: 80px;\r\n      line-height: 30px;\r\n      color: #1ABC9C;\r\n      font-weight: bold;\r\n      height: 30px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"loader\">Loading...</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n  name: \"Loading\"\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loader {\r\n  margin: 0 auto;\r\n  font-size: 20px;\r\n  width: 1em;\r\n  height: 1em;\r\n  border-radius: 50%;\r\n  position: relative;\r\n  text-indent: -9999em;\r\n  animation: load-effect 1s infinite linear;\r\n\r\n  margin-bottom: 50px\r\n\r\n}\r\n@keyframes load-effect {\r\n  0% {\r\n    /*\r\n\r\n    -3em:左移3em\r\n\r\n     2em:下移2em\r\n\r\n     0:模糊距离0，即纯色\r\n\r\n     .5em:外扩.5em\r\n\r\n     #FFF:白色\r\n\r\n    */\r\n    box-shadow: -3em 2em 0 .5em #1ABC9C, 0 2em 0 0 #F7DC6F, 3em 2em 0 -.5em #1ABC9C;\r\n  }\r\n  25% {\r\n    box-shadow: -3em 2em 0 0 #42b983, 0 2em 0 -.5em #E74C3C, 3em 2em 0 0 #42b983;\r\n  }\r\n  50% {\r\n    box-shadow: -3em 2em 0 -0.5em #1ABC9C, 0 2em 0 0 #E74C3C, 3em 2em 0 .5em #1ABC9C;\r\n  }\r\n  75% {\r\n    box-shadow: -3em 2em 0 0 #F7DC6F, 0 2em 0 .5em #1ABC9C, 3em 2em 0 0 #1ABC9C;\r\n  }\r\n  100% {\r\n    box-shadow: -3em 2em 0 .5em #1ABC9C, 0 2em 0 0 #F7DC6F, 3em 2em 0 -.5em #1ABC9C;\r\n  }\r\n}\r\n\r\n</style>\r\n","\r\nimport { defineComponent } from 'vue'\r\nexport default defineComponent({\r\n  name: \"Loading\"\r\n})\r\n","import { render } from \"./Loading.vue?vue&type=template&id=1a6835a0&scoped=true\"\nimport script from \"./Loading.vue?vue&type=script&lang=ts\"\nexport * from \"./Loading.vue?vue&type=script&lang=ts\"\n\nimport \"./Loading.vue?vue&type=style&index=0&id=1a6835a0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1a6835a0\"\n\nexport default script","\r\nimport {defineComponent,reactive,ref} from 'vue'\r\nimport {useStore} from \"vuex\";\r\nimport {ResModel, StoryForm, StoryModel} from \"@/model/datas\";\r\nimport UpdateCard from \"@/components/common/UpdateCard.vue\";\r\nimport axios from \"axios\";\r\nimport apis from \"@/common/apis\";\r\nimport router from \"@/router\";\r\nimport Loading from \"@/components/common/Loading.vue\";\r\nimport {cmsMngInit} from \"@/script/transitionInit\";\r\nexport default defineComponent({\r\n  name: \"VideoMng\",\r\n  components:{\r\n    Loading\r\n  },\r\n  setup(){\r\n\r\n    const resData = reactive({\r\n      datas:Array<ResModel>(),\r\n      filename:'',\r\n      filesize:0.0,\r\n    })\r\n    const formdata = new FormData()\r\n    const store = useStore()\r\n    const loadingStatus = ref(false)\r\n    initData()\r\n    function initData(){\r\n      axios.get(apis.apiUrl.res).then(res=>{\r\n        for(let i = 0;i<res.data.data.length;i++){\r\n          resData.datas.push(res.data.data[i])\r\n        }\r\n      })\r\n    }\r\n\r\n    function controlRes(resId:number){\r\n      axios.put(apis.apiUrl.res+resId).then(res=>{\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n    function fileSelect(file:any){\r\n      resData.filename = file.target.files[0].name\r\n      resData.filesize = Number((file.target.files[0].size/1024/1024).toString().match(/^\\d+(?:\\.\\d{0,2})?/))\r\n      formdata.append(\"file\",file.target.files[0])\r\n    }\r\n\r\n    function uploadFile(){\r\n      loadingStatus.value = true\r\n      resData.filename = '';\r\n      resData.filesize = 0\r\n      axios.post(apis.apiUrl.res+Number(JSON.parse(sessionStorage.getItem(\"payload\") as string).adminId),formdata,{\r\n        headers:{'Content-Type':'multipart/form-data'}\r\n\r\n      }).then(res=>{\r\n        loadingStatus.value = false\r\n        console.log(\"ok\")\r\n        formdata.delete(\"file\")\r\n        router.go(0)\r\n      })\r\n    }\r\n\r\n    return{\r\n      resData,\r\n      controlRes,\r\n      fileSelect,\r\n      uploadFile,\r\n      loadingStatus,\r\n      ...cmsMngInit()\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./VideoMng.vue?vue&type=template&id=2726c00e&scoped=true\"\nimport script from \"./VideoMng.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoMng.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoMng.vue?vue&type=style&index=0&id=2726c00e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2726c00e\"\n\nexport default script","module.exports = __webpack_public_path__ + \"img/add.c8fc9f1e.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Loading.vue?vue&type=style&index=0&id=1a6835a0&lang=scss&scoped=true\""],"sourceRoot":""}